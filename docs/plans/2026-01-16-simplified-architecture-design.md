# Neural Inbox: Ğ£Ğ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

**Ğ”Ğ°Ñ‚Ğ°:** 2026-01-16
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Ğ£Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´Ñ‘Ğ½

## ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹

1. **ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ±Ğ¾Ñ‚Ğ° (3-5 ÑĞµĞº)** â€” Intent Router + ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚ÑÑ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾
2. **ĞÑˆĞ¸Ğ±ĞºĞ¸ Ñ€Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³Ğ°** â€” 5 Ğ¸Ğ½Ñ‚ĞµĞ½Ñ‚Ğ¾Ğ² (SAVE, QUERY, ACTION, CHAT, UNCLEAR), Ğ±Ğ¾Ñ‚ Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ¿ÑƒÑ‚Ğ°ĞµÑ‚ÑÑ
3. **ĞĞµÑ‚ ÑƒĞ´Ğ¾Ğ±Ğ½Ğ¾Ğ³Ğ¾ UI** â€” Ğ¿Ğ¾Ğ¸ÑĞº Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡ĞµÑ€ĞµĞ· Ñ‡Ğ°Ñ‚
4. **Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°** â€” Ğ¼Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ° Ğ´Ğ»Ñ Ñ€Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³Ğ° Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ğ¸Ğ½Ñ‚ĞµĞ½Ñ‚Ğ¾Ğ²

## Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: "Ğ—Ğ°Ñ…Ğ²Ğ°Ñ‚ â†’ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram Bot   â”‚         â”‚  Mini App       â”‚
â”‚  "Ğ§Ñ‘Ñ€Ğ½Ğ°Ñ Ğ´Ñ‹Ñ€Ğ°"  â”‚         â”‚  "ĞŸÑƒĞ½ĞºÑ‚ ÑƒĞ¿Ñ€Ğ°Ğ²." â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ SAVE   â”‚         â”‚ â€¢ Inbox (Ğ²ÑÑ‘)   â”‚
â”‚ â€¢ ĞĞ²Ñ‚Ğ¾-Ñ‚Ğ¸Ğ¿      â”‚         â”‚ â€¢ Tasks         â”‚
â”‚ â€¢ ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹    â”‚         â”‚ â€¢ Calendar      â”‚
â”‚   Ğ¾Ñ‚Ğ²ĞµÑ‚         â”‚         â”‚ â€¢ Search        â”‚
â”‚                 â”‚   â”€â”€â”€â–º  â”‚ â€¢ Projects      â”‚
â”‚ Ğ¢ĞµĞºÑÑ‚/Ğ“Ğ¾Ğ»Ğ¾Ñ/    â”‚         â”‚                 â”‚
â”‚ Ğ¤Ğ¾Ñ‚Ğ¾/PDF/Forwardâ”‚         â”‚ â€¢ Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ â”‚
â”‚                 â”‚         â”‚ â€¢ Ğ£Ğ´Ğ°Ğ»ÑÑ‚ÑŒ       â”‚
â”‚                 â”‚         â”‚ â€¢ ĞŸĞµÑ€ĞµĞ¼ĞµÑ‰Ğ°Ñ‚ÑŒ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  PostgreSQL   â”‚
            â”‚  + pgvector   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ğ§Ğ°ÑÑ‚ÑŒ 1: Ğ£Ğ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ğ±Ğ¾Ñ‚

### ĞĞ¾Ğ²Ñ‹Ğ¹ flow Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹

```
User: "ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ»Ğ¾ĞºĞ¾ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°"
        â”‚
        â–¼ (Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾, < 100ms)
Bot: "â³ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑÑ..." (msg_id = X)
        â”‚
        â”œâ”€â”€â–º Ğ‘Ğ”: { original_input, status: "processing" }
        â”‚
        â–¼ (Background Task, 1-3 ÑĞµĞº)
ContentClassifier Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚:
  - type: task
  - title: "ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ»Ğ¾ĞºĞ¾"
  - due_at: Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ° 09:00
  - tags: ["#Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸"]
        â”‚
        â–¼
Bot: Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµÑ‚ msg_id=X â†’ "âœ… Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°: ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ»Ğ¾ĞºĞ¾ (Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ° 09:00)"
                             [Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ]
```

### ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ² handle_message

```python
async def handle_message(message):
    text = message.text

    # 1. Ğ¡ĞĞĞ§ĞĞ›Ğ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
    if is_search_query(text):  # "Ğ½Ğ°Ğ¹Ğ´Ğ¸", "Ñ‡Ñ‚Ğ¾ Ñƒ Ğ¼ĞµĞ½Ñ", "Ğ¿Ğ¾ĞºĞ°Ğ¶Ğ¸", "ĞºĞ°ĞºĞ¸Ğµ"
        return await redirect_to_webapp(message)

    # 2. ĞŸĞĞ¢ĞĞœ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼
    await save_and_classify_background(message)
```

### ĞŸĞµÑ€ĞµÑ…Ğ²Ğ°Ñ‚ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ²Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

**Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ñ‹:** `Ğ½Ğ°Ğ¹Ğ´Ğ¸`, `Ğ½Ğ°Ğ¹Ñ‚Ğ¸`, `Ğ¿Ğ¾ĞºĞ°Ğ¶Ğ¸`, `Ñ‡Ñ‚Ğ¾ Ñƒ Ğ¼ĞµĞ½Ñ`, `ĞºĞ°ĞºĞ¸Ğµ`, `ÑĞ¿Ğ¸ÑĞ¾Ğº`

**ĞÑ‚Ğ²ĞµÑ‚ Ğ±Ğ¾Ñ‚Ğ°:**
```
Ğ¯ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ Ğ²ÑÑ‘, Ñ‡Ñ‚Ğ¾ Ñ‚Ñ‹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑˆÑŒ ğŸ“¥
Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¾Ñ‚ĞºÑ€Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ğŸ‘‡
[ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Neural Inbox]  â† WebApp button
```

### Ğ¢Ğ¸Ğ¿Ñ‹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° (5 Ñ‚Ğ¸Ğ¿Ğ¾Ğ²)

| Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-----|----------|
| `task` | Ğ’ÑÑ‘ ÑĞ¾ ÑÑ€Ğ¾ĞºĞ¾Ğ¼, Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸ĞµĞ¼, Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸ĞµĞ¼ |
| `idea` | ĞœÑ‹ÑĞ»Ğ¸, Ğ¿Ğ»Ğ°Ğ½Ñ‹, Ğ¸Ğ´ĞµĞ¸ |
| `note` | Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ, Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ |
| `resource` | Ğ¡ÑÑ‹Ğ»ĞºĞ¸, Ñ„Ğ°Ğ¹Ğ»Ñ‹, Ñ„Ğ¾Ñ‚Ğ¾, Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ |
| `contact` | ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹ Ğ»ÑĞ´ĞµĞ¹ |

**Ğ£Ğ±Ñ€Ğ°Ğ½:** `event` â€” Ğ²ÑÑ‘ ÑĞ¾ ÑÑ€Ğ¾ĞºĞ°Ğ¼Ğ¸ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ `task`

### Inline-ĞºĞ½Ğ¾Ğ¿ĞºĞ¸

| Ğ¡Ğ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ñ | ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ |
|----------|--------|
| ĞŸĞ¾ÑĞ»Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ | `[Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ]` (Ñ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸ĞµĞ¼) |
| ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ Ğ¾ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğµ | `[Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾]` `[+15Ğ¼]` `[+1Ñ‡]` `[+1Ğ´]` |

### Ğ§Ñ‚Ğ¾ ÑƒĞ´Ğ°Ğ»ÑĞµĞ¼ Ğ¸Ğ· Ğ±Ğ¾Ñ‚Ğ°

- `src/ai/router.py` â€” Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ
- `Intent` enum â€” Ğ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½
- `process_query()` â€” Ğ¿Ğ¾Ğ¸ÑĞº Ğ² Mini App
- `process_action()` â€” Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ² Mini App
- `process_chat()` â€” Ğ±Ğ¾Ñ‚ Ğ½Ğµ Ğ±Ğ¾Ğ»Ñ‚Ğ°ĞµÑ‚
- Agent loop + tools â€” Ğ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½
- Ğ›Ğ¸ÑˆĞ½Ğ¸Ğµ inline-ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ¿Ğ¾ÑĞ»Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ

---

## Ğ§Ğ°ÑÑ‚ÑŒ 2: Telegram Mini App

### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

- **Framework:** React 18 + TypeScript
- **Bundler:** Vite
- **Styling:** Tailwind CSS
- **UI Components:** shadcn/ui
- **Data fetching:** React Query (TanStack Query)
- **Calendar:** react-day-picker Ğ¸Ğ»Ğ¸ shadcn/ui Calendar

### ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ (5 Ğ²ĞºĞ»Ğ°Ğ´Ğ¾Ğº)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Neural Inbox                      âš™ï¸  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚            [ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸]           â”‚
â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“      ğŸ“¥      ğŸ”      âœ“      ğŸ“…    â”‚
â”‚ Projects Inbox  Search  Tasks Calendar â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Inbox

- Ğ’ÑĞµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸, ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ Ğ´Ğ°Ñ‚Ğµ (Ğ½Ğ¾Ğ²Ñ‹Ğµ ÑĞ²ĞµÑ€Ñ…Ñƒ)
- Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€-Ñ‡Ğ¸Ğ¿Ñ‹: `Ğ’ÑĞµ` `Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸` `Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ¸` `Ğ˜Ğ´ĞµĞ¸` `Ğ ĞµÑÑƒÑ€ÑÑ‹` `ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹`
- Ğ—Ğ°Ğ¿Ğ¸ÑĞ¸ ÑĞ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ¾Ğ¼ `PROCESSING` â€” Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ ÑĞ¾ ÑĞ¿Ğ¸Ğ½Ğ½ĞµÑ€Ğ¾Ğ¼
- Pull-to-refresh Ğ¸Ğ»Ğ¸ ĞºĞ½Ğ¾Ğ¿ĞºĞ° "ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ"

### Tasks

- Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼
- Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ / Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ° / ĞĞ° Ğ½ĞµĞ´ĞµĞ»Ğµ / ĞŸĞ¾Ğ·Ğ¶Ğµ / Ğ‘ĞµĞ· ÑÑ€Ğ¾ĞºĞ° / Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ½Ñ‹Ğµ
- Ğ§ĞµĞºĞ±Ğ¾ĞºÑ â†’ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ñ‡Ñ‘Ñ€ĞºĞ¸Ğ²Ğ°Ğ½Ğ¸Ñ (Optimistic UI)

### Calendar

- Ğ¢Ğ¾Ñ‡ĞºĞ¸ Ğ½Ğ° Ğ´Ğ½ÑÑ… Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°Ğ¼Ğ¸
- ĞšĞ»Ğ¸Ğº Ğ½Ğ° Ğ´ĞµĞ½ÑŒ â†’ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°Ğ´Ğ°Ñ‡ ÑĞ½Ğ¸Ğ·Ñƒ (sheet)
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ (`react-day-picker` Ğ¸Ğ»Ğ¸ `shadcn/ui`)

### Search (Bottom Sheet Drawer)

- ĞĞ°Ğ¶Ğ°Ñ‚Ğ¸Ğµ Ğ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Search â†’ Ğ²Ñ‹ĞµĞ·Ğ¶Ğ°ĞµÑ‚ drawer ÑĞ½Ğ¸Ğ·Ñƒ Ğ½Ğ° Ğ²ĞµÑÑŒ ÑĞºÑ€Ğ°Ğ½
- ĞŸĞ¾Ğ»Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ° ÑĞ²ĞµÑ€Ñ…Ñƒ (ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ° Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚)
- Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾Ğ´ Ğ¿Ğ¾Ğ»ĞµĞ¼
- Ğ¡Ğ²Ğ°Ğ¹Ğ¿ Ğ²Ğ½Ğ¸Ğ· Ğ¸Ğ»Ğ¸ ĞºÑ€ĞµÑÑ‚Ğ¸Ğº â†’ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ

### Projects

- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ² (ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ)
- Ğ’Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° â€” ĞµĞ³Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸
- Ğ‘Ğ¾Ñ‚ ĞĞ• Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸

### ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜ ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ»Ğ¾ĞºĞ¾                     ğŸ“  â”‚
â”‚   ğŸ“… Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ° 09:00  â€¢  #Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚                                     â”‚
  Ñ‡ĞµĞºĞ±Ğ¾ĞºÑ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ tasks)                ğŸ“ = Ğ²Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
```

### Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ´ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â†  Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°                        â‹® Ğ¼ĞµĞ½Ñ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ»Ğ¾ĞºĞ¾                           â”‚
â”‚                                          â”‚
â”‚  ğŸ“… Ğ¡Ñ€Ğ¾Ğº: Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ°, 17 ÑĞ½Ğ² 09:00          â”‚
â”‚  ğŸ·ï¸ Ğ¢ĞµĞ³Ğ¸: #Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸                       â”‚
â”‚  ğŸ“ ĞŸÑ€Ğ¾ĞµĞºÑ‚: â€”                            â”‚
â”‚                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº                        â–¼   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ĞÑ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ/Ñ„Ğ¾Ñ‚Ğ¾/Ñ„Ğ°Ğ¹Ğ»  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞœĞµĞ½Ñ (â‹®):** Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ, ĞŸĞµÑ€ĞµĞ¼ĞµÑÑ‚Ğ¸Ñ‚ÑŒ Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚, Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ‚Ğ¸Ğ¿, Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ

---

## Ğ§Ğ°ÑÑ‚ÑŒ 3: API Endpoints

### ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

- ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ header `X-Telegram-Init-Data`
- Ğ‘ÑĞºĞµĞ½Ğ´ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑŒ Ñ‡ĞµÑ€ĞµĞ· HMAC-SHA256
- Ğ‘ĞµĞ· JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²

### Endpoints

```
GET    /api/items              â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹ (Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ, Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹)
GET    /api/items/:id          â€” Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸
PATCH  /api/items/:id          â€” Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
DELETE /api/items/:id          â€” ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
PATCH  /api/items/:id/complete â€” Ğ¾Ñ‚Ğ¼ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ½Ğ¾Ğ¹
PATCH  /api/items/:id/move     â€” Ğ¿ĞµÑ€ĞµĞ¼ĞµÑÑ‚Ğ¸Ñ‚ÑŒ Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚

GET    /api/tasks              â€” Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ´Ğ»Ñ Tasks Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸
GET    /api/tasks/calendar     â€” Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ñ Ğ´Ğ°Ñ‚Ğ°Ğ¼Ğ¸ Ğ´Ğ»Ñ Calendar

GET    /api/projects           â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ²
POST   /api/projects           â€” ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚
PATCH  /api/projects/:id       â€” Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
DELETE /api/projects/:id       â€” ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ

GET    /api/search?q=...       â€” ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
```

### Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ Ğ´Ğ»Ñ GET /api/items

```
?type=task,note           â€” Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ñƒ
?status=inbox,active      â€” Ğ¿Ğ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑÑƒ
?project_id=5             â€” Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ
?limit=20&offset=0        â€” Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ
```

---

## Ğ§Ğ°ÑÑ‚ÑŒ 4: ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ

### Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° < 2 ÑĞµĞºÑƒĞ½Ğ´

### Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ

```
ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Mini App
    â”‚
    â–¼ (0-200ms)
ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Skeleton UI
    â”‚
    â–¼ Telegram.WebApp.ready() â€” ĞŸĞĞ¡Ğ›Ğ• Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ° Skeleton!
    â”‚
    â–¼ (200-500ms) Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾:
    â”œâ”€â”€ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ JS bundle (< 100KB gzip)
    â””â”€â”€ Fetch /api/items?limit=20
    â”‚
    â–¼ (500-1000ms)
ĞÑ‚Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ 20 Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹
    â”‚
    â–¼ (Ğ² Ñ„Ğ¾Ğ½Ğµ)
Lazy load Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ²ĞºĞ»Ğ°Ğ´Ğ¾Ğº
```

### ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

| Ğ¢ĞµÑ…Ğ½Ğ¸ĞºĞ° | Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ |
|---------|-----------|
| Code splitting | ĞšĞ°Ğ¶Ğ´Ğ°Ñ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ° â€” Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ chunk |
| Lazy load | Tasks, Calendar, Projects Ğ³Ñ€ÑƒĞ·ÑÑ‚ÑÑ Ğ¿Ğ¾ ĞºĞ»Ğ¸ĞºÑƒ |
| Skeleton UI | ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ»Ğ¸Ğº |
| React Query | ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ + stale-while-revalidate |
| Vite + minify | Bundle < 100KB gzip |
| Tailwind purge | Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ ÑÑ‚Ğ¸Ğ»Ğ¸ |

### WebApp.ready()

```typescript
// âŒ ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾: Ğ² index.html
Telegram.WebApp.ready()

// âœ… ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾: Ğ¿Ğ¾ÑĞ»Ğµ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ° Skeleton
useEffect(() => {
  Telegram.WebApp.ready()
}, [])
```

### Ğ£Ğ¼Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»Ğ»Ğ¸Ğ½Ğ³ (React Query)

```typescript
// Inbox â€” Ğ¶Ğ´Ñ‘Ğ¼ AI Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ
useQuery('items', fetchItems, {
  refetchInterval: 5_000  // 5 ÑĞµĞº
})

// Projects/Calendar â€” Ñ€ĞµĞ´ĞºĞ¾ Ğ¼ĞµĞ½ÑÑÑ‚ÑÑ
useQuery('projects', fetchProjects, {
  refetchInterval: false,
  refetchOnWindowFocus: true
})
```

### Optimistic UI

```typescript
const completeMutation = useMutation({
  mutationFn: completeItem,
  onMutate: async (itemId) => {
    await queryClient.cancelQueries(['items'])
    const previous = queryClient.getQueryData(['items'])

    // ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾ Ğ·Ğ°Ñ‡Ñ‘Ñ€ĞºĞ¸Ğ²Ğ°ĞµĞ¼
    queryClient.setQueryData(['items'], old =>
      markAsComplete(old, itemId)
    )

    return { previous }
  },
  onError: (err, itemId, context) => {
    // ĞÑ‚ĞºĞ°Ñ‚
    queryClient.setQueryData(['items'], context.previous)
    toast.error('ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ')
  }
})
```

---

## Ğ§Ğ°ÑÑ‚ÑŒ 5: Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

### Ğ‘ÑĞºĞµĞ½Ğ´ (Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ)

```
src/
â”œâ”€â”€ main.py                 # + CORS, ÑÑ‚Ğ°Ñ‚Ğ¸ĞºĞ° React
â”œâ”€â”€ bot/handlers/
â”‚   â””â”€â”€ message.py          # Ğ£Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¸Ñ‚ÑŒ: check_search â†’ save
â”œâ”€â”€ ai/
â”‚   â”œâ”€â”€ router.py           # Ğ£Ğ”ĞĞ›Ğ˜Ğ¢Ğ¬
â”‚   â””â”€â”€ classifier.py       # Ğ’Ñ‹Ğ·Ğ¾Ğ² Ğ² background task
â”œâ”€â”€ db/
â”‚   â””â”€â”€ models.py           # + ItemStatus.PROCESSING
â””â”€â”€ api/
    â”œâ”€â”€ app.py              # FastAPI Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
    â”œâ”€â”€ auth.py             # NEW: Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ initData
    â”œâ”€â”€ schemas.py          # NEW: Pydantic DTOs
    â””â”€â”€ routes/
        â”œâ”€â”€ items.py        # CRUD + complete + move
        â”œâ”€â”€ tasks.py        # NEW: Ğ´Ğ»Ñ Calendar
        â”œâ”€â”€ projects.py     # CRUD Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ²
        â””â”€â”€ search.py       # Ğ¡ĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
```

### Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´ (Ğ½Ğ¾Ğ²Ğ°Ñ Ğ¿Ğ°Ğ¿ĞºĞ°)

```
webapp/
â”œâ”€â”€ index.html
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ package.json
â””â”€â”€ src/
    â”œâ”€â”€ main.tsx
    â”œâ”€â”€ App.tsx
    â”œâ”€â”€ api/
    â”‚   â””â”€â”€ client.ts           # fetch + initData header
    â”œâ”€â”€ hooks/
    â”‚   â”œâ”€â”€ useItems.ts         # React Query hooks
    â”‚   â”œâ”€â”€ useTasks.ts
    â”‚   â””â”€â”€ useProjects.ts
    â”œâ”€â”€ components/
    â”‚   â”œâ”€â”€ Layout.tsx
    â”‚   â”œâ”€â”€ BottomNav.tsx
    â”‚   â”œâ”€â”€ ItemCard.tsx
    â”‚   â”œâ”€â”€ ItemDetail.tsx
    â”‚   â”œâ”€â”€ SearchDrawer.tsx
    â”‚   â”œâ”€â”€ Skeleton.tsx
    â”‚   â””â”€â”€ ui/                 # shadcn ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
    â””â”€â”€ pages/
        â”œâ”€â”€ Inbox.tsx
        â”œâ”€â”€ Tasks.tsx
        â”œâ”€â”€ Calendar.tsx
        â”œâ”€â”€ Projects.tsx
        â””â”€â”€ ProjectDetail.tsx
```

### Pydantic Schemas (src/api/schemas.py)

```python
class ItemResponse(BaseModel):
    id: int
    type: str
    status: str
    title: str
    content: str | None
    due_at: datetime | None
    tags: list[str]
    project_id: int | None
    attachment_file_id: str | None
    attachment_type: str | None
    created_at: datetime

    class Config:
        from_attributes = True

class ItemUpdate(BaseModel):
    title: str | None = None
    content: str | None = None
    type: str | None = None
    due_at: datetime | None = None
    tags: list[str] | None = None
    project_id: int | None = None

class ProjectCreate(BaseModel):
    name: str
    color: str | None = "#8B5CF6"
    emoji: str | None = None

class SearchResult(BaseModel):
    items: list[ItemResponse]
    total: int
    has_more: bool
```

### CORS Ğ¸ ÑÑ‚Ğ°Ñ‚Ğ¸ĞºĞ° (src/main.py)

```python
from fastapi.staticfiles import StaticFiles
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_methods=["*"],
    allow_headers=["*"],
)

# Ğ Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ° Ğ±Ğ¸Ğ»Ğ´Ğ° React (Ğ¿Ğ¾ÑĞ»Ğµ API routes!)
app.mount("/", StaticFiles(
    directory="webapp/dist",
    html=True
), name="webapp")
```

### ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ” (Alembic)

```python
# alembic/versions/xxxx_add_processing_status.py

def upgrade():
    op.execute("ALTER TYPE itemstatus ADD VALUE 'processing'")

def downgrade():
    # PostgreSQL Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹ Ğ¸Ğ· enum
    pass
```

---

## Ğ§Ğ°ÑÑ‚ÑŒ 6: Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ğµ Ñ€ĞµĞ·ÑĞ¼Ğµ

### Ğ§Ñ‚Ğ¾ Ñ€ĞµÑˆĞ°ĞµĞ¼

| ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ |
|----------|---------|
| ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚ (3-5 ÑĞµĞº) | ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾ "Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑÑ...", AI Ğ² Ñ„Ğ¾Ğ½Ğµ |
| ĞÑˆĞ¸Ğ±ĞºĞ¸ Ñ€Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³Ğ° Ğ¸Ğ½Ñ‚ĞµĞ½Ñ‚Ğ¾Ğ² | ĞĞµÑ‚ Ñ€Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³Ğ°, Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ SAVE |
| ĞĞµÑ‚ ÑƒĞ´Ğ¾Ğ±Ğ½Ğ¾Ğ³Ğ¾ UI Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° | Mini App Ñ ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ¼ |
| Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ/ÑƒĞ´Ğ°Ğ»ÑÑ‚ÑŒ | ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ Ğ² Mini App |

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

1. **ĞĞ´Ğ¸Ğ½ Ğ¸Ğ½Ñ‚ĞµĞ½Ñ‚ SAVE** â€” ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ² background task
2. **Telegram Mini App** â€” Ñ‡ĞµÑ€ĞµĞ· WebApp API, Ğ½Ğµ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑĞ°Ğ¹Ñ‚
3. **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ initData** â€” Ğ±ĞµĞ· JWT, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
4. **React Query** â€” ÑƒĞ¼Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»Ğ»Ğ¸Ğ½Ğ³, optimistic UI
5. **ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ»Ğ¸Ğº** â€” skeleton UI, lazy loading, < 2 ÑĞµĞº Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°

### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

- **Ğ‘Ğ¾Ñ‚:** Aiogram (ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğ¹)
- **API:** FastAPI + Pydantic
- **Frontend:** React + TypeScript + Vite + Tailwind + shadcn/ui
- **Ğ‘Ğ”:** PostgreSQL + pgvector (Ğ±ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹)
- **Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹:** Railway (Ğ±Ğ¾Ñ‚ + API + ÑÑ‚Ğ°Ñ‚Ğ¸ĞºĞ°)
